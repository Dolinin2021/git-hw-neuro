# Курсовой проект «Резервное копирование»
Курсовой проект представляет собой программу для резервного копирования фотографий с профиля пользователя ВК в облачные хранилища Яндекс.Диск и Google.Drive.


## Входные данные
Имя пользователя или его id в ВК. \
Остальные данные следует вводить в зависимости от используемой служебной команды.


## Выходные данные
1. Файл `log_photos.json` с информацией о фотографиях пользователя (пользователей):
```javascript
    [{
    "file_name": "19_1455637994.jpg",
    "size": "z"
    }]
```
2. Файл `log_albums.json` с информацией о фотоальбомах пользователя (пользователей):
```javascript
[
    [
        {
            "title": "Фандомные работы",
            "user_id": 17755711,
            "id": 262086270,
            "size": 5,
            "description": "ЗФБ 2019"
        }
    ]
]
```
3. Файл `log_vk.json` с информацией об ошибках VK API:
```javascript
{
    "error": {
        "error_code": 100,
        "error_msg": "One of the parameters specified was missing or invalid: album_id is invalid",
        "request_params": [
            {
                "key": "v",
                "value": "5.131"
            },
            {
                "key": "owner_id",
                "value": "164752241"
            },
            {
                "key": "rev",
                "value": "0"
            },
            {
                "key": "album_id",
                "value": ""
            },
            {
                "key": "extended",
                "value": "1"
            },
            {
                "key": "count",
                "value": "5"
            },
            {
                "key": "method",
                "value": "photos.get"
            },
            {
                "key": "oauth",
                "value": "1"
            }
        ]
    }
}
```
4. Файл `log_yandex.json` с информацией об ошибках REST API Яндекс.Диска:
```javascript
{
    "message": "По указанному пути \"Test\" уже существует папка с таким именем.",
    "description": "Specified path \"Test\" points to existent directory.",
    "error": "DiskPathPointsToExistentDirectoryError"
}
```
5. Измененный Я.диск и Google.Drive, куда добавились фотографии.


## Функциональность
1. Программа получает фотографии с профиля, используя метод [photos.get](https://vk.com/dev/photos.get).
2. Программа получает информацию о фотоальбомах пользователя, используя метод [getAlbums](https://vk.com/dev/photos.getAlbums).
3. Сохраняет фотографии максимального размера (ширина/высота в пикселях) на Я.Диск и Google.Drive.
4. Для имени фотографий использует количество лайков и дату загрузки. 
5. Сохраняет информацию о фотографиях в json-файл с результатами (в корневой каталог проекта).
6. Сохраняет информацию о фотоальбомах в json-файл (в корневой каталог проекта).
7. Перезаписывает файл в случае повторения имён.
8. Имеется прогресс-бар или логирование для отслеживания процесса программы.
9. Сохраняет фотографии не только из служебных, но также из других альбомов.
10. Имеется возможность получать фотографии нескольких пользователей сразу.

## Технические замечания
1. Программа декомпозирована на функции/классы/модули/пакеты.
2. Пакет `classes` содержит классы для работы с аккаунтом ВКонтакте, Яндекс.Диском и Google.Drive.
3. Пакет `functions` содержит функцию, реализующую интерфейс программы и файл `const.py`, содержащий служебные переменные с постоянными значениями.
4. Файл с настройками `settings.py` находится в корневом каталоге проекта.
5. Все зависимости указаны в файле `requiremеnts.txt`, он также находится в корневом каталоге проекта.
6. Все функции, классы и методы имеют свою документацию.


## Настройка проекта
1. Установить все пакеты из файла `requirements.txt` с помощью команды `pip install -r requirements.txt`
2. Получить ключ доступа ([токен](https://dev.vk.com/api/access-token/getting-started)) пользователя Вконтакте.
3. Получить ключ доступа (токен) с [полигона Яндекс.Диска](https://yandex.ru/dev/disk/poligon/).
4. Получить учётные данные ([credentials](https://developers.google.com/workspace/guides/create-credentials)) для использования Google.Drive API.
5. Перед запуском заполнить все параметры в файле `settings.py`, подробнее в документации к файлу.


## Руководство пользователя
Для того чтобы воспользоваться сервисом, необходимо ввести одну из следующих команд:

Служебные команды: \
`/docs` - вывести дополнительное меню документации программы, \
`/exit_save_all` - выйти из программы, предварительно сохранив данные в лог программы, \
`/exit_not_save` - выйти из программы без сохранения данных.

Команды для работы с VK API (от лица пользователя): \
`/get_photos` – получить информацию о фотографиях пользователя (пользователей) Вконтакте, \
`/get_albums` - получить информацию о фотоальбомах пользователя (пользователей) Вконтакте.

Команды для работы с Яндекс.Диском: \
`/get_files_yandex_disk` - получить список файлов на Яндекс.Диске, \
`/create_directory_yandex_disk` – создать папку на Яндекс.Диске с определённым именем, \
`/download_photos_yandex_disk` – загрузить фото на Яндекс.Диск по определённому пути.

Команды для работы с Google.Drive: \
`/get_files_google_drive` - получить список файлов на Google.Drive, \
`/create_directory_google_drive` - создать папку на Google.Drive с определённым именем, \
`/download_photos_google_drive` - загрузить фото на Google.Drive по определённому пути.


## Скриншоты
**Яндекс.Диск:**
![margo_1](https://user-images.githubusercontent.com/89892788/152205799-35e8c3b0-444c-455a-a7fa-b3dc287300e4.png)

**Google.Drive:**
![margo_2](https://user-images.githubusercontent.com/89892788/152205822-5a9cad3c-28fb-43c4-a6e4-4f6dc6c2af28.png)